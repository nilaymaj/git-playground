(this["webpackJsonpgit-playground"]=this["webpackJsonpgit-playground"]||[]).push([[0],{238:function(e,t,r){},239:function(e,t,r){},243:function(e,t){},245:function(e,t){},255:function(e,t){},257:function(e,t){},284:function(e,t){},285:function(e,t){},290:function(e,t){},292:function(e,t){},299:function(e,t){},318:function(e,t){},338:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=338},478:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(80),o=r.n(a),s=(r(238),r(239),r(8)),c=r(25),u=r(7),l=r(484),d=r(5),f=r(15),h=r(60),v=r(134),m=r(138),p=r(139),j=function(e){Object(v.a)(r,e);var t=Object(m.a)(r);function r(e){var n;return Object(u.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(h.a)(n),r.prototype),n}return r}(Object(p.a)(Error)),b=function(e){Object(v.a)(r,e);var t=Object(m.a)(r);function r(e){var n;return Object(u.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(h.a)(n),r.prototype),n}return r}(Object(p.a)(Error)),g=function e(t){var r=this;Object(u.a)(this,e),this._tree=void 0,this.clone=function(t){return new e(t._tree)},this.updatedClass=function(t){return r._tree===t?r:new e(t)},this.get=function(e){return 0===e.length?r._tree:r._tree.getIn(e,null)},this.insert=function(t,n){if(0===t.length)throw new j;var i=r.get(t.slice(0,-1));if(!e.isInternalNode(i))throw new j;var a=t[t.length-1];if(i.has(a))throw new Error("Node already exists");var o=void 0===n?Object(f.c)():n,s=r._tree.setIn(t,o);return r.updatedClass(s)},this.remove=function(e){if(0===e.length)throw new j;if(!r.get(e))throw new j;var t=r._tree.deleteIn(e);return r.updatedClass(t)},this.update=function(e,t){if(0===e.length)throw new j;if(null===r.get(e))throw new j;var n=r._tree.updateIn(e,null,(function(){return t}));return r.updatedClass(n)},this.convert=function(t){var n=r._tree.map((function r(n){return e.isLeafNode(n)?t(n):n.map(r)}));return new e(n)},this.toLeafArray=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.treeToLeafs(r._tree,n,t)},this._tree=t||Object(f.c)()};g.isInternalNode=function(e){return!!e&&e instanceof f.c},g.isLeafNode=function(e){return!!e&&!(e instanceof f.c)},g.treeToLeafs=function(e,t,r){if(g.isLeafNode(e))return[{path:t,value:e}];var n=Object(d.a)(e.entries());return r&&n.sort((function(e,t){return r(e[0],t[0])})),n.flatMap((function(e){var n=Object(s.a)(e,2),i=n[0],a=n[1];return g.treeToLeafs(a,[].concat(Object(d.a)(t),[i]),r)}))};var y=function(e,t){if(e.length<t.length)return!1;for(var r=0;r<t.length;++r)if(e[r]!==t[r])return!1;return!0},w=function(e){return 0===(e=e.trim()).length?[]:e.split("/")},x=function(e){return e.join("/")},O=function(e){return e.slice(0,-1)},_=function e(t){var r=this;Object(u.a)(this,e),this._fs=void 0,this.updatedClass=function(t){return t===r._fs?r:new e(t)},this.get=function(e){return 0===e.length?r._fs._tree:r._fs.get(e)},this.getPathDepth=function(t){if(0===t.length)return 0;var n=r.get(O(t));if(!n)return 5;if(e.isFile(n))return 4;var i=n.get(t[t.length-1]);return i?e.isFile(i)?2:1:3},this.create=function(t,n){if(r.get(t))throw new j("Already exists");var i="file"===n?e.generateFileBlob():void 0,a=r._fs.insert(t,i);return r.updatedClass(a)},this.delete=function(e){if(!r.get(e))throw new j;var t=r._fs.remove(e);return r.updatedClass(t)},this.has=function(t,n){var i=r.get(t);return!!i&&(!n||(!("file"!==n||!e.isFile(i))||!("directory"!==n||!e.isDirectory(i))))},this.bumpFileVersion=function(t){if(0===t.length)throw new j;var n=r.get(t);if(!e.isFile(n))throw new j;var i=Object(c.a)(Object(c.a)({},n),{},{version:n.version+1}),a=r._fs.update(t,i);return r.updatedClass(a)},this.move=function(t,n,i){if(0===t.length)throw new j("Bad source");var a=r.get(t);if(!a)throw new j("Bad source");if(0===n.length)throw new j("Bad destination");var o=n.slice(0,-1),s=r.get(o);if(!e.isDirectory(s))throw new j("Bad destination");var u=!!r._fs.get(n)?r._fs.remove(n):r._fs,l=e.isFile(a)?Object(c.a)({},a):a,d=u.insert(n,l),f=i?d:d.remove(t);return r.updatedClass(f)},this._fs=t?t instanceof g?t:new g(t):new g};_.isFile=function(e){return!!e&&g.isLeafNode(e)},_.isDirectory=function(e){return!!e&&g.isInternalNode(e)},_.generateFileBlob=function(e){return{contentToken:e||Object(l.a)(),version:0}};var C=r(82),S="master",k=Object(f.d)({isDetached:!1,destination:[S]}),N=(k(),function(){function e(t){var r=this;Object(u.a)(this,e),this._head=void 0,this.updatedClass=function(t){return t===r._head?r:new e(t)},this._head=t||k()}return Object(C.a)(e,[{key:"detachTo",value:function(e){var t=this._head.set("isDetached",!0).set("destination",e);return this.updatedClass(t)}},{key:"attachTo",value:function(e){var t=this._head.set("isDetached",!1).set("destination",e);return this.updatedClass(t)}},{key:"updateTo",value:function(e){var t=Array.isArray(e),r=this._head.set("isDetached",!t).set("destination",e);return this.updatedClass(r)}},{key:"advanceTo",value:function(e,t){if(this._head.isDetached)return{refStorage:e,head:this.detachTo(t)};var r=this._head.destination;return{refStorage:e.update(r,t),head:this}}},{key:"getTargetCommit",value:function(e){return this._head.isDetached?this._head.destination:e.readLeaf(this._head.destination)}}]),e}()),T=r(85),F="sha1",D=function(e){var t=e.fileData,r=t.contentToken+" "+t.version.toString();return Object(T.createHash)(F).update(r).digest("hex")},L=function(e){return Array.from(e.items).reduce((function(e,t){var r=Object(s.a)(t,2),n=r[0]+"|"+r[1];return e.update(n)}),Object(T.createHash)(F)).digest("hex")},E=function(e){var t=Object(T.createHash)(F);return t.update(e.message),t.update(e.parent||""),t.update(e.workTree),t.update(e.timestamp.toISOString()),t.digest("hex")},H=function e(t,r){return Array.from(t.items).reduce((function(t,n){var i=Object(s.a)(n,2),a=i[0],o=i[1],c=r.read(o);if(!c||"commit"===c.type)throw new Error("Commit object pointed to by tree object");if("blob"===c.type)return t.insert([a],c);var u=e(c,r);if(!u)throw new Error("This shouldn't happen.");return t.insert([a],u._tree)}),new g)},P=function e(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(u.a)(this,e),this._items=void 0,this._compareFn=void 0,this.updatedClass=function(t,r){return t===n._items?n:new e(n._compareFn,t,!r)},this.get=function(e){for(var t,r=0,i=n._items.size-1;r<=i;){var a=Math.floor((r+i)/2),o=n._items.get(a);if(!o)throw new b;var s=(t=o.key,"function"===typeof e?e(t):n._compareFn(t,e));if(0===s)return{item:o,index:a};s<0?r=a+1:s>0&&(i=a-1)}if(r-i!==1)throw new b;return{item:null,index:r}},this.itemAt=function(e){return n._items.get(e,null)},this.size=function(){return n._items.size},this.insert=function(e,t){var r=n.get(e.key),i=r.item,a=r.index;if(i&&!t)throw new j("Already exists");if(i){var o=n._items.set(a,e);return n.updatedClass(o)}var s=n._items.insert(a,e);return n.updatedClass(s)},this.update=function(e,t,r){var i=n.get(e),a=i.item,o=i.index;if(a||r){if(a){var s=n._items.update(o,(function(e){return Object(c.a)(Object(c.a)({},e),{},{value:t})}));return n.updatedClass(s)}var u={key:e,value:t},l=n._items.insert(o,u);return n.updatedClass(l)}throw new j("Key not found")},this.remove=function(e){var t=n.get(e),r=t.item,i=t.index;if(!r)throw new j;var a=n._items.delete(i);return n.updatedClass(a)},this.findRange=function(e){var t=n.get(e),r=t.item,i=t.index;if(!r)return{start:i,end:i};for(var a=i;a>0;){var o=n._items.get(a-1);if(!o)throw new b;if(0!==e(o.key))break;--a}for(var s=i;s<n._items.size;){var c=n._items.get(s);if(!c)throw new b;if(0!==e(c.key))break;++s}return{start:a,end:s}},Object.freeze(t),this._compareFn=t,r){var a=Object(f.a)(r);i||(a=a.sort((function(e,r){var n=t(e.key,r.key);if(0===n)throw new j("Duplicate-key items");return n}))),this._items=a}else this._items=Object(f.a)()},A=function e(t){var r=t.entries().map((function(e){return e.path}));return I(r).reduce((function(r,n){if(n.end-n.start===1){var i=t._index.itemAt(n.start);if(!i)throw new b;if(1===i.key.length)return r.insert([n.name],i.value)}var a=t._index._items.slice(n.start,n.end).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{key:e.key.slice(1)})})),o=new M(a),s=e(o);return r.insert([n.name],s._tree)}),new g)},I=function(e){if(0===e.length)return[];for(var t=[],r=-1,n=-1,i="";r<e.length-1;){var a=e[++r];if(0===a.length)throw new Error("Empty path found");var o=a[0];o!==i&&(0!==r&&t.push({name:i,start:n,end:r}),n=r,i=o)}return t.push({name:i,start:n,end:r+1}),t},z=function(e,t){return e.localeCompare(t)},B=function e(t,r){if(0===t.length&&0===r.length)return 0;if(0===t.length)return-1;if(0===r.length)return 1;var n=z(t[0],r[0]);return 0!==n?n:e(t.slice(1),r.slice(1))},M=function e(t){var r=this;Object(u.a)(this,e),this._index=void 0,this.updatedClass=function(t){return r._index===t?r:new e(t)},this.size=function(){return r._index.size()},this.entries=function(){return Object(d.a)(r._index._items.entries()).map((function(e){return{path:e[1].key,entry:e[1].value}}))},this.get=function(e){if(0===e.length)throw new j;var t=r._index.get(e).item;return t&&t.value},this.upsert=function(e,t){if(0===e.length)throw new j;var n=r._index.update(e,t,!0);return r.updatedClass(n)},this.remove=function(e){if(0===e.length)throw new j;if(!r._index.get(e).item)throw new j;var t=r._index.remove(e);return r.updatedClass(t)},this.toTree=function(){return A(r)},this.getPathSection=function(e){return r._index.findRange((function(t){return y(t,e)?0:B(t,e)}))},this.overwriteSection=function(t,n){n instanceof e&&(n=n._index);var i=r.getPathSection(t);if(0!==n.size()){if(i.start>0){var a=r._index.itemAt(i.start-1),o=n.itemAt(0);if(!a||!o)throw new b;if(-1!==B(a.key,o.key))throw new j}if(i.end<r._index.size()){var s=r._index.itemAt(i.end),c=n.itemAt(n.size()-1);if(!s||!c)throw new b;if(1!==B(s.key,c.key))throw new j}}var u=r._index._items.slice(0,i.start),l=r._index._items.slice(i.end),f=[].concat(Object(d.a)(u),Object(d.a)(n._items),Object(d.a)(l)),h=new P(B,f,!0);return r.updatedClass(h)},this._index=t?t instanceof P?t:new P(B,t,!0):new P(B)};M.fromFileTree=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=_.isFile(e)?[{path:r,value:e}]:new g(e).toLeafArray(z,r),i=t,a=n.map((function(e){var t={type:"blob",fileData:e.value},r=i.write(t),n=r.storage,a=r.hash;return i=n,{key:e.path,value:{objectHash:a}}})),o=new P(B,a);return{storage:i,indexFile:new M(o)}},M.fromGitTree=function(e,t){var r=H(t,e).toLeafArray(z).map((function(e){var t=e.value,r=D(t);return{key:e.path,value:{objectHash:r}}})),n=new P(B,r);return new M(n)};var R=function e(t){var r=this;Object(u.a)(this,e),this._db=void 0,this.updatedClass=function(t){return r._db===t?r:new e(t)},this.read=function(e){return r._db.get(e,null)},this.write=function(e){var t=function(e){return"blob"===e.type?D(e):"tree"===e.type?L(e):E(e)}(e),n=r._db.set(t,e);return{storage:r.updatedClass(n),hash:t}},this.delete=function(e){if(!r._db.has(e))return r;var t=r._db.delete(e);return r.updatedClass(t)},this.entries=function(){return Object(d.a)(r._db.entries()).map((function(e){return{hash:e[0],object:e[1]}}))},this._db=t||Object(f.b)()},J=(new g).insert([S],""),V=function e(t){var r=this;Object(u.a)(this,e),this._branchHeads=void 0,this.updatedClass=function(t){return t===r._branchHeads?r:new e(t)},this.get=function(e){return 0===e.length?r._branchHeads._tree:r._branchHeads.get(e)},this.readLeaf=function(t){if(0===t.length)throw new j;var n=r._branchHeads.get(t);if(!e.isLeaf(n))throw new j;return n},this.create=function(e,t){if(0===e.length)throw new j;if(r._branchHeads.get(e))throw new j;var n=r._branchHeads.insert(e,t);return r.updatedClass(n)},this.delete=function(t){var n=r._branchHeads.get(t);if(!e.isLeaf(n))throw new j;var i=r._branchHeads.remove(t);return r.updatedClass(i)},this.getChildren=function(t){var n=r._branchHeads.get(t);if(!n||e.isLeaf(n))throw new j;return Object(d.a)(n.entries())},this.update=function(t,n){if(0===t.length)throw new j;var i=r._branchHeads.get(t);if(!e.isLeaf(i))throw new j;var a=r._branchHeads.update(t,n);return r.updatedClass(a)},this._branchHeads=t?t instanceof g?t:new g(t):J};V.isLeaf=function(e){return null!==e&&"string"===typeof e};var G=function(){return{fileSystem:new _,repository:{indexFile:new M,objectStorage:new R,refStorage:new V,head:new N}}},U=r(1),Y=G(),K=n.createContext({value:Y,setSandbox:function(){}}),q=function(e){var t=n.useState(null),r=Object(s.a)(t,2),i=r[0],a=r[1];n.useEffect((function(){a(G())}),[]);var o=n.useMemo((function(){return{value:i,setSandbox:a}}),[i]);return Object(U.jsx)(K.Provider,{value:o,children:e.children})},Q=function(){return n.useContext(K).value.repository},W=r(230),X=r(9),Z=r.n(X),$=function(e){var t=Z()("pane",e.className);return Object(U.jsx)("div",{className:"pane-wrapper",children:Object(U.jsxs)("div",{className:t,style:{borderColor:e.accentColor},children:[e.title&&Object(U.jsx)("div",{className:"pane-header",style:{backgroundColor:e.accentColor},children:e.title}),Object(U.jsx)("div",{className:"pane-body",children:e.children})]})})},ee=function(e){return Object(U.jsx)("div",{className:"empty-prompt",style:{color:e.color},children:Object(U.jsx)("p",{children:e.message})})},te=r(62),re=function(e){return Object(U.jsxs)("div",{className:"directory-item-row",onClick:e.onToggleExpand,children:[Object(U.jsx)("div",{className:"icon",children:e.expanded?Object(U.jsx)(te.a,{}):Object(U.jsx)(te.b,{})}),Object(U.jsx)("div",{className:"name",children:e.name})]})},ne=function(e){var t=n.useState(!0),r=Object(s.a)(t,2),i=r[0],a=r[1];return Object(U.jsxs)("div",{className:"directory-item",children:[Object(U.jsx)(re,{name:e.name,expanded:i,onToggleExpand:function(){return a((function(e){return!e}))}}),Object(U.jsx)(ae,{collapsed:!i,directory:e.directory})]})},ie=function(e){var t=e.file,r=t.contentToken,n=t.version,i="".concat(r.slice(-12)," v").concat(n);return Object(U.jsxs)("div",{className:"file-item",children:[Object(U.jsx)("div",{className:"icon",children:Object(U.jsx)(te.c,{})}),Object(U.jsx)("div",{className:"name",title:i,children:e.name})]})},ae=function(e){var t=Object(d.a)(e.directory.entries()),r=Z()("directory-children",{collapse:e.collapsed});return Object(U.jsx)("div",{className:r,children:t.map((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1];return g.isLeafNode(n)?Object(U.jsx)(ie,{name:r,file:n},r):Object(U.jsx)(ne,{name:r,directory:n},r)}))})},oe=function(e){var t=0===e.fileSystem._fs._tree.size;return Object(U.jsx)("div",{className:"file-system-root",children:t?Object(U.jsx)(ee,{message:"Create a file or directory from the terminal!",color:"green"}):Object(U.jsx)(ae,{directory:e.fileSystem._fs._tree})})},se=function(e){var t=n.useContext(K).value.fileSystem;return Object(U.jsx)($,{title:"File System",accentColor:"green",children:Object(U.jsx)(oe,{fileSystem:t})})},ce=function(e){var t=Z()("chip",e.className,e.onClick&&"button");return Object(U.jsx)("div",{className:t,style:{backgroundColor:e.color},onClick:e.onClick,title:e.hint,children:e.text})},ue=function(e){var t=e.indexItem.objectHash.slice(-7);return Object(U.jsxs)("div",{className:"index-item-row",children:[Object(U.jsx)("div",{className:"hash",children:Object(U.jsx)(ce,{color:"darkblue",text:t,hint:e.indexItem.objectHash,onClick:function(){return navigator.clipboard.writeText(e.indexItem.objectHash)}})}),Object(U.jsx)("div",{className:"path",children:x(e.path)})]})},le=function(e){var t=Q().indexFile.entries(),r=0===t.length;return Object(U.jsx)($,{title:"Index File",accentColor:"DarkBlue",children:Object(U.jsx)("div",{className:"index-file-root",children:r?Object(U.jsx)(ee,{message:"The index file is empty!",color:"DarkBlue"}):t.map((function(e){return Object(U.jsx)(ue,{path:e.path,indexItem:e.entry},x(e.path))}))})})},de=function(e){if("blob"===e.type){var t=e.fileData.contentToken.slice(-12),r=e.fileData.version;return"blob: ".concat(t,", v").concat(r)}if("tree"===e.type){var n=e.items.size;return"tree: ".concat(n," children")}var i=e.message;return"commit: ".concat(i)},fe=function(e){return Object(U.jsxs)("div",{className:"object-row",children:[Object(U.jsx)("div",{className:"hash",title:e.hash,children:Object(U.jsx)(ce,{text:e.hash.slice(-7),color:"purple",hint:e.hash,onClick:function(){return navigator.clipboard.writeText(e.hash)}})}),Object(U.jsx)("div",{className:"object",children:de(e.object)})]})},he=function(e){var t=Q().objectStorage,r=Object(d.a)(t._db.entries()),n=0===r.length;return Object(U.jsx)($,{title:"Object Storage",accentColor:"purple",children:Object(U.jsx)("div",{className:"object-storage-root",children:n?Object(U.jsx)(ee,{message:"No objects yet.",color:"purple"}):r.map((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1];return Object(U.jsx)(fe,{hash:r,object:n},r)}))})})},ve=function(){var e=Q();return Object(U.jsx)($,{title:"Repository View",accentColor:"red",children:Object(U.jsx)("pre",{children:JSON.stringify(e,void 0,2)})})},me=function(){var e=Q();return Object(U.jsx)($,{title:"Staging Area",accentColor:"blue",children:Object(U.jsx)("pre",{children:JSON.stringify(e,void 0,2)})})},pe=r(13),je=function(e,t,r,n,i,a){return{success:!1,system:{fileSystem:t||e.fileSystem,repository:{head:i||e.repository.head,objectStorage:r||e.repository.objectStorage,indexFile:n||e.repository.indexFile,refStorage:a||e.repository.refStorage}}}},be=function(e,t,r,n,i,a){return{success:!0,system:{fileSystem:t||e.fileSystem,repository:{head:i||e.repository.head,objectStorage:r||e.repository.objectStorage,indexFile:n||e.repository.indexFile,refStorage:a||e.repository.refStorage}}}},ge=function(e,t,r,n){var i=e.getPathDepth(t);return 1!==i&&2!==i?(r("".concat(x(t),": invalid path")),!1):1!==i||!n||(r("-r not provided: omitting directory'".concat(x(t),"'")),!1)},ye=function(e,t,r,n){if(t.length<2)return n("insufficient arguments"),je(e);var i=t.slice(0,-1),a=t[t.length-1],o=i.length>1,s=!!r.recursive;if(!function(e,t,r,n){var i=e.getPathDepth(t);return i>=4?(r("target '".concat(x(t),"' is not a directory")),!1):!(n&&i>=2)||(r("target '".concat(x(t),"' is not a directory")),!1)}(e.fileSystem,a,n,o))return je(e);var c,u=e.fileSystem,l=Object(pe.a)(i);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(!ge(u,f,n,!s))return je(e,u);var h=f[f.length-1],v=u.get(a);if(!v)throw new b;var m=_.isFile(v)?a:[].concat(Object(d.a)(a),[h]);if(y(m,f)){var p=x(m),j=x(f);return m.length===f.length?n("'".concat(j,"' and '").concat(p,"' are the same file")):n("cannot copy a directory, '".concat(j,"', into itself, '").concat(p,"'")),je(e,u)}var g=u.move(f,m,!0);u=g}}catch(w){l.e(w)}finally{l.f()}return be(e,u)},we={name:"cp",options:{recursive:{shortLetter:"r",description:"copy directories recursively",valueType:"boolean"}},execute:function(e,t,r,n){var i=n.map(w);return ye(e,i,r,t)}},xe=function(e,t,r){var n=x(r);if(0===r.length)return t('"'.concat(n,'": invalid path'));var i=O(r);return e.get(i)?e.get(r)?t('"'.concat(n,'": already exists')):e.create(r,"file"):t('"'.concat(n,'": invalid path'))},Oe={name:"create",options:{},execute:function(e,t,r,n){var i=n.map(w);if(0===i.length)return t("no file paths provided"),je(e);var a,o=e.fileSystem,s=Object(pe.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=xe(o,t,c);if(!u)return je(e,o);o=u}}catch(l){s.e(l)}finally{s.f()}return be(e,o)}},_e={name:"edit",options:{},execute:function(e,t,r,n){var i=n.map(w);if(0===i.length)return t("missing path operand"),je(e);var a,o=e.fileSystem,s=Object(pe.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(2!==o.getPathDepth(c))return t("'".concat(x(c),"': invalid path")),je(e,o);var u=o.bumpFileVersion(c);o=u}}catch(l){s.e(l)}finally{s.f()}return be(e,o)}},Ce={name:"mkdir",options:{},execute:function(e,t,r,n){var i=n.map(w);if(0===i.length)return t("missing path operand"),je(e);var a,o=e.fileSystem,s=Object(pe.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(3!==o.getPathDepth(c))return t("'".concat(x(c),"': invalid path")),je(e,o);var u=o.create(c,"directory");o=u}}catch(l){s.e(l)}finally{s.f()}return be(e,o)}},Se=function(e,t,r,n){var i=e.getPathDepth(t);return 1!==i&&2!==i?(r("".concat(x(t),": invalid path")),!1):1!==i||!n||(r("-r not provided: omitting directory'".concat(x(t),"'")),!1)},ke=function(e,t,r,n){if(t.length<2)return n("insufficient arguments"),je(e);var i=t.slice(0,-1),a=t[t.length-1],o=i.length>1,s=!!r.recursive;if(!function(e,t,r,n){var i=e.getPathDepth(t);return i>=4?(r("target '".concat(x(t),"' is not a directory")),!1):!(n&&i>=2)||(r("target '".concat(x(t),"' is not a directory")),!1)}(e.fileSystem,a,n,o))return je(e);var c,u=e.fileSystem,l=Object(pe.a)(i);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(!Se(u,f,n,!s))return je(e,u);var h=f[f.length-1],v=u.get(a);if(!v)throw new b;var m=_.isFile(v)?a:[].concat(Object(d.a)(a),[h]);if(y(m,f)){var p=x(m),j=x(f);return m.length===f.length?n("'".concat(j,"' and '").concat(p,"' are the same file")):n("cannot move '".concat(j,"' to a subdirectory of itself, '").concat(p,"'")),je(e,u)}var g=u.move(f,m);u=g}}catch(w){l.e(w)}finally{l.f()}return be(e,u)},Ne={name:"mv",options:{recursive:{shortLetter:"r",description:"copy directories recursively",valueType:"boolean"}},execute:function(e,t,r,n){var i=n.map(w);return ke(e,i,r,t)}},Te={name:"rm",options:{recursive:{shortLetter:"r",description:"delete recursively",valueType:"boolean"}},execute:function(e,t,r,n){var i=n.map(w);if(0===i.length)return t("missing file operand"),je(e);var a,o=e.fileSystem,s=Object(pe.a)(i);try{for(s.s();!(a=s.n()).done;){var c=a.value,u=o.get(c);if(!u)return t("'".concat(c,"': no such file or directory")),je(e,o);if(_.isDirectory(u)&&!r.recursive)return t("'".concat(c,"': is a directory")),je(e,o);var l=o.delete(c);o=l}}catch(d){s.e(d)}finally{s.f()}return be(e,o)}},Fe={name:"git-add",options:{},execute:function(e,t,r,n){var i=e.fileSystem,a=e.repository,o=a.objectStorage,s=a.indexFile,c=n.map(w);if(0===c.length)return t("missing path operand"),je(e);var u,l=s,d=o,f=Object(pe.a)(c);try{for(f.s();!(u=f.n()).done;){var h=u.value,v=i.get(h),m=s.getPathSection(h);if(v){var p=M.fromFileTree(v,d,h),j=p.storage,b=p.indexFile,g=l.overwriteSection(h,b);if(!g)throw new Error("This shouldn't happen.");l=g,d=j}else{if(m.start===m.end)return t("pathspec '".concat(h,"' did not match any files")),je(e,null,d,l);var y=l.overwriteSection(h,new M);l=y}}}catch(x){f.e(x)}finally{f.f()}return be(e,null,d,l)}},De={name:"git-checkout",options:{},execute:function(e,t,r,n){var i=e.repository.objectStorage,a=function(e,t){return 0===e.length?(t("missing target commit"),null):e.length>=2?(t("too many operands"),null):e[0]}(n,t);if(!a)return je(e);var o=i.read(a);if(!o||"commit"!==o.type)return t("'".concat(a,"': invalid commit address")),je(e);var s=o.workTree,c=i.read(s);if(!c||"tree"!==c.type)throw new b("Commit does not point to valid work tree!");var u=H(c,i),l=new _(u.convert((function(e){return e.fileData}))),d=M.fromGitTree(i,c),f=e.repository.head.detachTo(a);return t("HEAD is now at ".concat(a.slice(-7))),be(e,l,null,d,f)}},Le=function e(t,r){var n,i=Object(d.a)(t._tree.entries()),a=new Map,o=r,s=Object(pe.a)(i);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(g.isLeafNode(c[1]))a.set(c[0],c[1].objectHash);else{var u=e(new g(c[1]),r),l=u.storage,f=u.hash;a.set(c[0],f),o=l}}}catch(v){s.e(v)}finally{s.f()}var h={type:"tree",items:a};return o.write(h)},Ee={name:"git-commit",options:{message:{shortLetter:"m",description:"commit message",valueType:"single"}},execute:function(e,t,r,n){if(!r.message)return t("missing commit message"),je(e);var i=r.message,a=e.repository,o=a.indexFile,s=a.objectStorage,c=a.refStorage;try{var u=o.toTree(),l=Le(u,s),d=l.storage,f=l.hash,h=e.repository.head.getTargetCommit(c),v=d.write({type:"commit",timestamp:new Date,workTree:f,message:i,parent:h}),m=v.storage,p=v.hash,j=e.repository.head.advanceTo(c,p),b=j.head,g=j.refStorage;return be(e,null,m,null,b,g)}catch(y){return t("invalid index tree"),je(e)}}},He={name:"git-reset",options:{soft:{valueType:"boolean",description:"does not touch index file or working tree"},mixed:{valueType:"boolean",description:"resets index but not working tree"},hard:{valueType:"boolean",description:"resets index and working tree"}},execute:function(e,t,r,n){var i=e.repository,a=i.objectStorage,o=i.refStorage,s=i.head,c=function(e,t){if(0===e.length)t("missing target commit");else{if(!(e.length>=2))return e[0];t("too many operands")}}(n,t);if(!c)return je(e);var u=function(e){return e.soft?"soft":e.mixed?"mixed":e.hard?"hard":"mixed"}(r),l=a.read(c);if(!l||"commit"!==l.type)return t("'".concat(c.slice(-7),"': invalid commit address")),je(e);var d=a.read(l.workTree);if(!d||"tree"!==d.type)throw new Error("Inconsistent object storage");var f=s.advanceTo(o,c),h=f.head,v=f.refStorage;if("soft"===u)return be(e,null,null,null,h,v);var m=M.fromGitTree(a,d);if("mixed"===u)return be(e,null,null,m,h,v);var p=H(d,a),j=new _(p.convert((function(e){return e.fileData})));return be(e,j,null,m,h,v)}},Pe=r(232),Ae=r(228),Ie=function e(t){var r=this;Object(u.a)(this,e),this.binPath=void 0,this.parse=function(e){if(0===e.trim().length)return null;var t=Object.keys(r.binPath).find((function(t){var r=t+" ";return 0===e.indexOf(r)}));if(!t)return null;var n=e.slice(t.length+1),i=r.binPath[t].options,a=r.createYargsOptions(i),o=Object(Ae.a)(n,a),s=o._;o["--"];return{command:t,args:s,opts:Object(Pe.a)(o,["_","--"])}},this.createYargsOptions=function(e){var t={string:[],boolean:[],alias:{}};return Object.keys(e).forEach((function(r){var n=e[r];n.shortLetter&&(t.alias[r]=n.shortLetter),"boolean"===n.valueType&&t.boolean.push(r),"single"===n.valueType&&t.string.push(r)})),t},this.binPath=t||{}},ze={create:Oe,edit:_e,mkdir:Ce,rm:Te,cp:we,mv:Ne,"git add":Fe,"git checkout":De,"git commit":Ee,"git reset":He},Be=function(){return Object(f.a)()},Me=function(e){var t=Z()("terminal-row",{prompt:!!e.prompt});return Object(U.jsxs)("div",{className:t,children:[e.prompt&&Object(U.jsx)("span",{className:"terminal-row-prompt",children:e.prompt}),e.text]})},Re=function(e){var t=n.useRef(null);return n.useEffect((function(){var e=t.current;e&&(e.scrollTop=e.scrollHeight)}),[e.data]),Object(U.jsx)("div",{className:"terminal-data",ref:function(e){return t.current=e},children:Array.from({length:e.data.size}).map((function(t,r){var n=e.data.get(r);if(!n)throw new Error("This shouldn't happen.");return Object(U.jsx)(Me,{text:n.text,prompt:n.prompt},r)}))})},Je=function(e){var t=n.useState(""),r=Object(s.a)(t,2),i=r[0],a=r[1],o=e.onInput;return n.useEffect((function(){var e=function(e){if("Enter"===e.key){var t=i.trim();""!==t&&(a(""),o(t))}};return document.addEventListener("keyup",e),function(){return document.removeEventListener("keyup",e)}}),[i,o]),Object(U.jsx)("div",{className:"terminal-input__wrapper",children:Object(U.jsxs)("div",{className:"terminal-input",children:[Object(U.jsx)("span",{className:"prompt",children:">"}),Object(U.jsx)("input",{value:i,onChange:function(e){a(e.target.value)},className:"input"})]})})},Ve=new function e(){var t=this;Object(u.a)(this,e),this.parser=new Ie(ze),this.execute=function(e,r,n){var i=t.parser.parse(e);if(!i)return{system:r,success:!1};var a=ze[i.command];return a?a.execute(r,n,i.opts,i.args):{system:r,success:!1}}},Ge=function(){var e=n.useContext(K),t=n.useRef(Ve),r=n.useState(Be()),i=Object(s.a)(r,2),a=i[0],o=i[1];return Object(U.jsx)($,{className:"terminal-pane",children:Object(U.jsxs)("div",{className:"terminal-container",children:[Object(U.jsx)(Re,{data:a}),Object(U.jsx)(Je,{onInput:function(r){var n=t.current;if(!e.value)throw new Error("command executed w/o sandbox");if(o((function(e){return t=r,n=">",e.push({text:t,prompt:n});var t,n})),"clear"===r)return o(Be());var i=n.execute(r,e.value,(function(e){return o((function(t){return function(e,t){return e.push({text:t})}(t,e)}))})).system;e.setSandbox(i)}})]})})},Ue={direction:"row",splitPercentage:75,first:{direction:"column",splitPercentage:50,first:{direction:"row",first:"index-file-view",second:"object-storage-view"},second:{direction:"row",first:"staging-area",second:"repository-view"}},second:{direction:"column",splitPercentage:50,first:"terminal",second:"file-system"}},Ye={"file-system":Object(U.jsx)(se,{}),"staging-area":Object(U.jsx)(me,{}),"repository-view":Object(U.jsx)(ve,{}),"object-storage-view":Object(U.jsx)(he,{}),"index-file-view":Object(U.jsx)(le,{}),terminal:Object(U.jsx)(Ge,{})},Ke=function(){return n.useContext(K).value?Object(U.jsx)(W.Mosaic,{className:"pane-mosaic",renderTile:function(e){return Ye[e]},initialValue:Ue}):null};var qe=function(){return Object(U.jsx)("div",{className:"App",children:Object(U.jsx)(q,{children:Object(U.jsx)(Ke,{})})})},Qe=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,485)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),i(e),a(e),o(e)}))};o.a.render(Object(U.jsx)(i.a.StrictMode,{children:Object(U.jsx)(qe,{})}),document.getElementById("root")),Qe()}},[[478,1,2]]]);
//# sourceMappingURL=main.408ad362.chunk.js.map